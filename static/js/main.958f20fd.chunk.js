(this["webpackJsonpreact-app-1"]=this["webpackJsonpreact-app-1"]||[]).push([[0],{11:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return o}));var a=n(56),r=a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"201df3f1-e0c5-420b-8d56-d790364daf70"}}),s={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return r.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return r.post("follow/".concat(e))},unfollow:function(e){return r.delete("follow/".concat(e))}},i={getProfile:function(e){return r.get("profile/"+e)},getStatus:function(e){return r.get("profile/status/"+e)},updateStatus:function(e){return r.put("profile/status",{status:e})},savePhotoToServer:function(e){var t=new FormData;return t.append("image",e),r.put("profile/photo",t)},saveProfile:function(e){return r.put("profile",e)}},c={me:function(){return r.get("auth/me")},autorization:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return r.post("auth/login/",{email:e,password:t,rememberMe:n,captcha:a})},logout:function(){return r.delete("auth/login/")}},o={getCaptchaUrl:function(){return r.get("security/get-captcha-url")}}},16:function(e,t,n){e.exports={formControl:"FormsControls_formControl__1yYoe",error:"FormsControls_error__1VThZ",formAuthError:"FormsControls_formAuthError__1YkUl",item:"FormsControls_item__3-Vs5",itemCheckbox:"FormsControls_itemCheckbox__2TiWR",button:"FormsControls_button__39l4l"}},18:function(e,t,n){e.exports={nav:"Navbar_nav__1CLmV",item:"Navbar_item__3A-XE",active:"Navbar_active__3ZTVK"}},25:function(e,t,n){e.exports={headerWrapper:"Header_headerWrapper__3sRyr",headerContent:"Header_headerContent__1azkt",headerFlexContainer:"Header_headerFlexContainer__3pLg5",logo:"Header_logo__3hGQT",logoSmall:"Header_logoSmall__2ZBhp",loginBlock:"Header_loginBlock__XboRf"}},28:function(e,t,n){e.exports={itemContainer:"Post_itemContainer__3em3Y",itemAuthor:"Post_itemAuthor___5BC1",itemTextContainer:"Post_itemTextContainer__3gr_Q",itemText:"Post_itemText__1Gs8t",itemLikes:"Post_itemLikes__2TboS"}},29:function(e,t,n){e.exports={dialoges:"Messages_dialoges__2fN8o",dialogesItems:"Messages_dialogesItems__vgMyj",messages:"Messages_messages__2WPtS",textarea:"Messages_textarea__106WZ",button:"Messages_button__1F2f-"}},33:function(e,t,n){e.exports={postsContainer:"MyPosts_postsContainer__3kTqd",textarea:"MyPosts_textarea__qQoaY",button:"MyPosts_button__2T0mn",posts:"MyPosts_posts__2ZylJ"}},35:function(e,t,n){"use strict";n(1);var a=n.p+"static/media/preloader.3eb5beb7.svg",r=n(42),s=n.n(r),i=n(0);t.a=function(e){return Object(i.jsx)("div",{className:s.a.preloaderContainer,children:Object(i.jsx)("div",{className:s.a.preloader,children:Object(i.jsx)("img",{src:a})})})}},42:function(e,t,n){e.exports={preloaderContainer:"Preloader_preloaderContainer__gpqoT",preloader:"Preloader_preloader___0zQC"}},43:function(e,t,n){e.exports={item:"DialogItem_item__1KH-_",active:"DialogItem_active__2cQxL"}},44:function(e,t,n){e.exports={container:"Login_container__PsUg5",title:"Login_title__XxVI7"}},5:function(e,t,n){e.exports={profileInfoContainer:"ProfileInfo_profileInfoContainer__F8CKq",profileInfoAvatar:"ProfileInfo_profileInfoAvatar__ToA4C",profileStatus:"ProfileInfo_profileStatus__18x-d",profileStatusEdit:"ProfileInfo_profileStatusEdit__N0CwO",descriptionBlock:"ProfileInfo_descriptionBlock__33Yf_",image:"ProfileInfo_image__1cKfV",profileUserDataItem:"ProfileInfo_profileUserDataItem__3ilhc",arrow:"ProfileInfo_arrow__7gfHJ",contactsBlock:"ProfileInfo_contactsBlock__3iMBj",contact:"ProfileInfo_contact__3RBCA",button:"ProfileInfo_button__39aHD"}},53:function(e,t,n){"use strict";n.d(t,"d",(function(){return x})),n.d(t,"e",(function(){return g})),n.d(t,"c",(function(){return _})),n.d(t,"b",(function(){return N})),n.d(t,"f",(function(){return S}));var a=n(4),r=n.n(a),s=n(10),i=n(27),c=n(2),o=n(11),u="FOLLOW",l="UNFOLLOW",d="SET_USERS",j="SET_CURRENT_PAGE",p="SET_TOTAL_USERS_COUNT",b="TOGGLE_IS_FETCHING",f="TOGGLE_FOLLOWING_PROGRESS",m={users:[],pageSize:20,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},h=function(e){return{type:u,userId:e}},O=function(e){return{type:l,userId:e}},x=function(e){return{type:j,currentPage:e}},v=function(e){return{type:b,isFetching:e}},g=function(e,t){return{type:f,isFetching:e,userId:t}},_=function(e,t){return function(){var n=Object(s.a)(r.a.mark((function n(a){var s;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(v(!0)),n.next=3,o.d.getUsers(e,t);case 3:s=n.sent,a(v(!1)),a((i=s.items,{type:d,users:i})),a((r=s.totalCount,{type:p,count:r}));case 7:case"end":return n.stop()}var r,i}),n)})));return function(e){return n.apply(this,arguments)}}()},N=function(e){return function(){var t=Object(s.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(g(!0,e)),t.next=3,o.d.follow(e);case 3:0===t.sent.data.resultCode&&n(h(e)),n(g(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(e){return function(){var t=Object(s.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(g(!0,e)),t.next=3,o.d.unfollow(e);case 3:0===t.sent.data.resultCode&&n(O(e)),n(g(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(c.a)(Object(c.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(c.a)(Object(c.a)({},e),{},{followed:!0}):e}))});case l:return Object(c.a)(Object(c.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(c.a)(Object(c.a)({},e),{},{followed:!1}):e}))});case d:return Object(c.a)(Object(c.a)({},e),{},{users:t.users});case j:return Object(c.a)(Object(c.a)({},e),{},{currentPage:t.currentPage});case p:return Object(c.a)(Object(c.a)({},e),{},{totalUsersCount:t.count});case b:return Object(c.a)(Object(c.a)({},e),{},{isFetching:t.isFetching});case f:return Object(c.a)(Object(c.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(i.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!=t.userId}))});default:return e}}},55:function(e,t,n){"use strict";t.a=n.p+"static/media/user-default-avatar.fbfe03c2.png"},60:function(e,t,n){e.exports={profileContainer:"Profile_profileContainer__I9XKx"}},61:function(e,t,n){e.exports={message:"Message_message__3076P"}},62:function(e,t,n){e.exports={item:"News_item__12zP1"}},63:function(e,t,n){e.exports={item:"Music_item__2W7VV"}},88:function(e,t,n){},94:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var a=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,102)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),s(e),i(e)}))},r=n(19),s=n(4),i=n.n(s),c=n(10),o=n(27),u=n(2),l=n(11),d="ADD-POST",j="SET_USER_PROFILE",p="SET_STATUS",b="DELETE_POST",f="SAVE_PHOTO_SUCCESS",m={profile:null,postsData:[{id:1,message:"It's my first post",likesCount:2},{id:2,message:"It's my second post",likesCount:223},{id:3,message:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, \n      sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. \n      Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris \n      nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in \n      reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. \n      Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia \n      deserunt mollit anim id est laborum.",likesCount:123}],status:""},h=function(e){return{type:p,status:e}},O=function(e){return function(){var t=Object(c.a)(i.a.mark((function t(n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.b.getProfile(e);case 2:a=t.sent,n((r=a.data,{type:j,profile:r}));case 4:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(u.a)(Object(u.a)({},e),{},{newPostText:"",postsData:[].concat(Object(o.a)(e.postsData),[{id:e.postsData.length+1,message:t.newPostText,likesCount:0}])});case j:return Object(u.a)(Object(u.a)({},e),{},{profile:t.profile});case p:return Object(u.a)(Object(u.a)({},e),{},{status:t.status});case b:return Object(u.a)(Object(u.a)({},e),{},{postsData:e.postsData.filter((function(e){return e.id!=t.postId}))});case f:return Object(u.a)(Object(u.a)({},e),{},{profile:Object(u.a)(Object(u.a)({},e.profile),{},{photos:t.photos})});default:return e}},v="SEND-NEW-MESSAGE",g={dialogesData:[{id:1,name:"Username 1"},{id:2,name:"Username 2"},{id:3,name:"Username 3"},{id:4,name:"Username 4"},{id:5,name:"Username 5"}],messagesData:[{id:1,message:"Hi"},{id:2,message:"How are you?"},{id:3,message:"Yo"}]},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:var n=t.newMessageText;return Object(u.a)(Object(u.a)({},e),{},{messagesData:[].concat(Object(o.a)(e.messagesData),[{id:e.messagesData.length+1,message:n}])});default:return e}},N=n(53),S="SET_USER_DATA",C="SET_AUTH_ERROR",w="GET_CAPTCHA_URL_SUCCESS",P={userId:null,email:null,login:null,isAuth:!1,authError:"",captchaUrl:null},y=function(e,t,n,a,r){return{type:S,payload:{userId:e,email:t,login:n,isAuth:a,authError:r}}},I=function(){return function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a,r,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.me();case 2:0===(n=e.sent).data.resultCode&&(a=n.data.data,r=a.id,s=a.login,c=a.email,t(y(r,c,s,!0,null)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},T=function(e){return{type:w,payload:{captchaUrl:e}}},k=function(){return function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.c.getCaptchaUrl();case 2:n=e.sent,a=n.data.url,t(T(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:case w:return Object(u.a)(Object(u.a)({},e),t.payload);case C:return Object(u.a)(Object(u.a)({},e),{},{authError:t.authError});default:return e}},U=n(57),A="INITIALIZED_SUCCESS",D={initialized:!1},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(u.a)(Object(u.a)({},e),{},{initialized:!0});default:return e}},M=Object(r.c)({profilePage:x,messagesPage:_,usersPage:N.a,auth:E,app:F}),L=Object(r.e)(M,Object(r.a)(U.a)),R=n(1),z=n.n(R),B=n(34),H=n.n(B),G=(n(88),n(9)),V=n(20),W=n(21),q=n(23),J=n(22),Y=(n(94),n(12)),K=n(6),Z=n(25),Q=n.n(Z),X=n(0),$=function(e){return Object(X.jsx)("header",{className:Q.a.headerWrapper,children:Object(X.jsx)("div",{className:Q.a.headerContent,children:Object(X.jsxs)("div",{className:Q.a.headerFlexContainer,children:[Object(X.jsx)("div",{className:Q.a.logo,children:"React Social Network"}),Object(X.jsx)("div",{className:Q.a.logoSmall,children:"RSN"}),Object(X.jsx)("div",{className:Q.a.loginBlock,children:e.isAuth?Object(X.jsx)("div",{children:Object(X.jsx)("button",{onClick:e.logout,children:"Log out"})}):Object(X.jsx)(Y.b,{to:"/login",children:"Login"})})]})})})},ee=function(e){Object(q.a)(n,e);var t=Object(J.a)(n);function n(){return Object(V.a)(this,n),t.apply(this,arguments)}return Object(W.a)(n,[{key:"render",value:function(){return Object(X.jsx)($,Object(u.a)({},this.props))}}]),n}(z.a.Component),te=Object(G.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.logout();case 2:0===e.sent.data.resultCode&&t(y(null,null,null,!1,null));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(ee),ne=n(18),ae=n.n(ne),re=function(){return Object(X.jsxs)("nav",{className:ae.a.nav,children:[Object(X.jsx)("div",{className:ae.a.item,children:Object(X.jsx)(Y.b,{to:"/profile",activeClassName:ae.a.active,children:"Profile"})}),Object(X.jsx)("div",{className:ae.a.item,children:Object(X.jsx)(Y.b,{to:"/messages",activeClassName:ae.a.active,children:"Messages"})}),Object(X.jsx)("div",{className:ae.a.item,children:Object(X.jsx)(Y.b,{to:"/news",activeClassName:ae.a.active,children:"News"})}),Object(X.jsx)("div",{className:ae.a.item,children:Object(X.jsx)(Y.b,{to:"/music",activeClassName:ae.a.active,children:"Music"})}),Object(X.jsx)("div",{className:ae.a.item,children:Object(X.jsx)(Y.b,{to:"/users",activeClassName:ae.a.active,children:"Users"})})]})},se=n(60),ie=n.n(se),ce=n(33),oe=n.n(ce),ue=n(28),le=n.n(ue),de=function(e){return Object(X.jsxs)("div",{className:le.a.itemContainer,children:[Object(X.jsxs)("div",{className:le.a.itemAuthor,children:[Object(X.jsx)("img",{src:"https://i.guim.co.uk/img/media/fe1e34da640c5c56ed16f76ce6f994fa9343d09d/0_174_3408_2046/master/3408.jpg?width=1200&height=900&quality=85&auto=format&fit=crop&s=0d3f33fb6aa6e0154b7713a00454c83d",alt:""}),Object(X.jsx)("div",{children:"Username"})]}),Object(X.jsxs)("div",{className:le.a.itemTextContainer,children:[Object(X.jsx)("div",{className:le.a.itemText,children:e.message}),Object(X.jsx)("div",{className:le.a.itemLikes,children:Object(X.jsxs)("span",{children:["Likes ",e.likesCount]})})]})]})},je=n(8),pe=function(e){return e?void 0:"Field is required"},be=n(24),fe=n(16),me=n.n(fe),he=function(e){var t=e.input,n=e.meta,a=Object(be.a)(e,["input","meta"]),r=n.touched&&n.error;return Object(X.jsxs)("div",{className:me.a.formControl+" "+(r?me.a.error:""),children:[Object(X.jsx)("div",{children:Object(X.jsx)("textarea",Object(u.a)(Object(u.a)({},t),a))}),r&&Object(X.jsx)("span",{children:n.error})]})},Oe=function(e){return Object(X.jsx)(je.b,{onSubmit:e.onSubmit,render:function(e){var t=e.handleSubmit;return Object(X.jsxs)("form",{onSubmit:t,children:[Object(X.jsx)("div",{className:oe.a.textarea,children:Object(X.jsx)(je.a,{name:"NewPostText",component:he,placeholder:"What's new?",validate:pe})}),Object(X.jsx)("div",{children:Object(X.jsx)("button",{className:oe.a.button,type:"submit",children:"Add post"})})]})}})},xe=function(e){var t=e.postsData.map((function(e){return Object(X.jsx)(de,{message:e.message,likesCount:e.likesCount},e.id)})).reverse();return Object(X.jsxs)("div",{className:oe.a.postsContainer,children:[e.isOwner?Object(X.jsx)("h2",{children:"My posts"}):Object(X.jsx)("h2",{children:"Posts"}),e.isOwner?Object(X.jsx)(Oe,{onSubmit:function(t){e.addPost(t.NewPostText),t.NewPostText=null}}):void 0,Object(X.jsx)("div",{className:oe.a.posts,children:t})]})},ve=Object(G.b)((function(e){return{postsData:e.profilePage.postsData,newPostText:e.profilePage.newPostText}}),(function(e){return{addPost:function(t){e(function(e){return{type:d,newPostText:e}}(t))}}}))(xe),ge=n(30),_e=n(5),Ne=n.n(_e),Se=n(35),Ce=function(e){var t=Object(R.useState)(!1),n=Object(ge.a)(t,2),a=n[0],r=n[1],s=Object(R.useState)(e.status),i=Object(ge.a)(s,2),c=i[0],o=i[1];Object(R.useEffect)((function(){o(e.status)}),[e.status]);return Object(X.jsxs)("div",{children:[!a&&Object(X.jsx)("div",{className:Ne.a.profileStatus,children:Object(X.jsx)("span",{onClick:function(){!0===e.isOwner&&r(!0)},children:e.status||"Status"})}),a&&Object(X.jsx)("div",{className:Ne.a.profileStatusEdit,children:Object(X.jsx)("textarea",{onChange:function(e){o(e.currentTarget.value)},onBlur:function(){r(!1),e.updateStatus(c)},autoFocus:!0,value:c})})]})},we=n(55),Pe=function(e){var t=e.input,n=Object(be.a)(e,["input"]);return Object(X.jsx)("div",{children:Object(X.jsx)("input",Object(u.a)(Object(u.a)({},t),n))})},ye=function(e){var t=e.input,n=Object(be.a)(e,["input"]);return Object(X.jsx)("div",{children:Object(X.jsx)("textarea",Object(u.a)(Object(u.a)({},t),n))})},Ie=function(e){return Object(X.jsx)(je.b,{onSubmit:e.onSubmit,initialValues:e.profile,render:function(t){var n=t.handleSubmit;return Object(X.jsxs)("form",{onSubmit:n,children:[Object(X.jsxs)("div",{className:Ne.a.profileUserDataItem,children:["Full name: ",Object(X.jsx)(je.a,{name:"fullName",component:Pe,placeholder:"Full name"})]}),Object(X.jsxs)("div",{className:Ne.a.profileUserDataItem,children:["Looking for a job: ",Object(X.jsx)(je.a,{name:"lookingForAJob",component:"input",type:"checkbox"})]}),Object(X.jsxs)("div",{className:Ne.a.profileUserDataItem,children:["My professional skills:",Object(X.jsx)(je.a,{name:"lookingForAJobDescription",component:ye,placeholder:"Describe your skills"})]}),Object(X.jsxs)("div",{className:Ne.a.profileUserDataItem,children:["About me:",Object(X.jsx)(je.a,{name:"aboutMe",component:ye,placeholder:"Information about you"})]}),Object(X.jsxs)("div",{className:Ne.a.profileUserDataItem,children:["Contacts: ",Object.keys(e.profile.contacts).map((function(e){return Object(X.jsxs)("div",{className:Ne.a.contact,children:[e,":",Object(X.jsx)("div",{children:Object(X.jsx)(je.a,{name:"contacts."+e,component:"input",placeholder:e})})]},e)}))]}),Object(X.jsx)("div",{children:Object(X.jsx)("button",{className:Ne.a.button,type:"submit",children:"Save"})})]})}})},Te=function(e){return Object(X.jsxs)("div",{children:[Object(X.jsx)("div",{className:Ne.a.profileUserDataItem,children:Object(X.jsx)("b",{children:"PERSONAL INFORMATION:"})}),Object(X.jsxs)("div",{className:Ne.a.profileUserDataItem,children:[Object(X.jsx)("b",{children:"Full name: "}),e.profile.fullName]}),Object(X.jsxs)("div",{className:Ne.a.profileUserDataItem,children:[Object(X.jsx)("b",{children:"Looking for a job: "}),e.profile.lookingForAJob?"Yes":"No"]}),e.profile.lookingForAJob&&Object(X.jsxs)("div",{className:Ne.a.profileUserDataItem,children:[Object(X.jsx)("b",{children:"My professional skills: "}),e.profile.lookingForAJobDescription]}),Object(X.jsxs)("div",{className:Ne.a.profileUserDataItem,children:[Object(X.jsx)("b",{children:"About me: "}),e.profile.aboutMe]}),Object(X.jsxs)("div",{className:Ne.a.profileUserDataItem,children:[Object(X.jsx)("b",{children:"Contacts: "}),Object.keys(e.profile.contacts).map((function(t){return Object(X.jsx)(ke,{contactTitle:t,contactValue:e.profile.contacts[t]},t)}))]}),e.isOwner&&Object(X.jsx)("div",{children:Object(X.jsx)("button",{className:Ne.a.button,onClick:e.activateEditMode,children:"Edit"})})]})},ke=function(e){var t=e.contactTitle,n=e.contactValue;return Object(X.jsxs)("div",{className:Ne.a.contact,children:[Object(X.jsxs)("b",{children:[t,":"]})," ",n]})},Ee=function(e){var t=Object(R.useState)(!1),n=Object(ge.a)(t,2),a=n[0],r=n[1];if(!e.profile)return Object(X.jsx)(Se.a,{});return Object(X.jsxs)("div",{className:Ne.a.profileInfoContainer,children:[Object(X.jsxs)("div",{className:Ne.a.profileInfoAvatar,children:[Object(X.jsx)("img",{className:Ne.a.image,src:e.profile.photos.large||we.a,alt:""}),e.isOwner&&Object(X.jsxs)("div",{children:[Object(X.jsx)("span",{children:"Change avatar"}),Object(X.jsx)("input",{type:"file",onChange:function(t){e.savePhotoToServer(t.target.files[0])}})]})]}),Object(X.jsxs)("div",{className:Ne.a.descriptionBlock,children:[Object(X.jsx)(Ce,{status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner}),a?Object(X.jsx)(Ie,{profile:e.profile,isOwner:e.isOwner,onSubmit:function(t){r(!1),e.saveProfile(t)}}):Object(X.jsx)(Te,{profile:e.profile,isOwner:e.isOwner,activateEditMode:function(){r(!0)}})]})]})},Ue=function(e){return Object(X.jsxs)("section",{className:ie.a.profileContainer,children:[Object(X.jsx)(Ee,{isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatus:e.updateStatus,savePhotoToServer:e.savePhotoToServer,saveProfile:e.saveProfile}),Object(X.jsx)(ve,{isOwner:e.isOwner})]})},Ae=function(e){Object(q.a)(n,e);var t=Object(J.a)(n);function n(){return Object(V.a)(this,n),t.apply(this,arguments)}return Object(W.a)(n,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t){this.props.match.params.userId!=e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(X.jsx)(Ue,Object(u.a)(Object(u.a)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhotoToServer:this.props.savePhotoToServer,saveProfile:this.props.saveProfile}))}}]),n}(z.a.Component),De=Object(r.d)(Object(G.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,isAuth:e.auth.isAuth,authorizedUserId:e.auth.userId}}),{getUserProfile:O,getStatus:function(e){return function(){var t=Object(c.a)(i.a.mark((function t(n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.b.getStatus(e);case 2:a=t.sent,n(h(a.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(c.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.b.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(h(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhotoToServer:function(e){return function(){var t=Object(c.a)(i.a.mark((function t(n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.b.savePhotoToServer(e);case 2:0===(a=t.sent).data.resultCode&&n((r=a.data.data.photos,{type:f,photos:r}));case 4:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(c.a)(i.a.mark((function t(n,a){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().auth.userId,t.next=3,l.b.saveProfile(e);case 3:0===t.sent.data.resultCode&&n(O(r));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),K.f)(Ae),Fe=n(29),Me=n.n(Fe),Le=n(43),Re=n.n(Le),ze=function(e){var t="/messages/"+e.id;return Object(X.jsx)("div",{className:Re.a.item,children:Object(X.jsx)(Y.b,{to:t,activeClassName:Re.a.active,children:e.name})})},Be=n(61),He=n.n(Be),Ge=function(e){return Object(X.jsx)("div",{className:He.a.message,children:e.message})},Ve=function(e){return Object(X.jsx)(je.b,{onSubmit:e.onSubmit,render:function(e){var t=e.handleSubmit;return Object(X.jsxs)("form",{onSubmit:t,children:[Object(X.jsx)("div",{children:Object(X.jsx)(je.a,{className:Me.a.textarea,name:"Text",component:he,placeholder:"Enter your message",validate:pe})}),Object(X.jsx)("div",{children:Object(X.jsx)("button",{className:Me.a.button,type:"submit",children:"Send"})})]})}})},We=function(e){var t=e.dialogesData.map((function(e){return Object(X.jsx)(ze,{name:e.name,id:e.id},e.id)})),n=e.messagesData.map((function(e){return Object(X.jsx)(Ge,{message:e.message},e.id)}));return Object(X.jsxs)("div",{className:Me.a.dialoges,children:[Object(X.jsx)("div",{className:Me.a.dialogesItems,children:t}),Object(X.jsxs)("div",{className:Me.a.messages,children:[n,Object(X.jsx)("div",{children:Object(X.jsx)(Ve,{onSubmit:function(t){e.sendNewMessage(t.Text),t.Text=null}})})]})]})},qe=function(e){return{isAuth:e.auth.isAuth}},Je=Object(r.d)(Object(G.b)((function(e){return{dialogesData:e.messagesPage.dialogesData,messagesData:e.messagesPage.messagesData,newMessageText:e.messagesPage.newMessageText}}),(function(e){return{sendNewMessage:function(t){e(function(e){return{type:v,newMessageText:e}}(t))}}})),(function(e){var t=function(t){Object(q.a)(a,t);var n=Object(J.a)(a);function a(){return Object(V.a)(this,a),n.apply(this,arguments)}return Object(W.a)(a,[{key:"render",value:function(){return this.props.isAuth?Object(X.jsx)(e,Object(u.a)({},this.props)):Object(X.jsx)(K.a,{to:"/login"})}}]),a}(z.a.Component);return Object(G.b)(qe)(t)}))(We),Ye=n(62),Ke=n.n(Ye),Ze=function(e){return Object(X.jsx)("div",{className:Ke.a.item,children:"News"})},Qe=n(63),Xe=n.n(Qe),$e=function(){return Object(X.jsx)("div",{className:Xe.a.item,children:"Music"})},et=function(e){var t=e.input,n=e.meta,a=Object(be.a)(e,["input","meta"]),r=n.touched&&n.error;return Object(X.jsxs)("div",{className:me.a.formControl+" "+(r?me.a.error:""),children:[Object(X.jsx)("div",{children:Object(X.jsx)("input",Object(u.a)(Object(u.a)({},t),a))}),r&&Object(X.jsx)("span",{children:n.error})]})},tt=n(44),nt=n.n(tt),at=function(e){return Object(X.jsx)(je.b,{onSubmit:e.onSubmit,render:function(t){var n=t.handleSubmit;return Object(X.jsxs)("form",{onSubmit:n,children:[Object(X.jsxs)("div",{className:me.a.item,children:["Email: ",Object(X.jsx)(je.a,{name:"Email",component:et,placeholder:"Email",validate:pe})]}),Object(X.jsxs)("div",{className:me.a.item,children:["Password: ",Object(X.jsx)(je.a,{name:"Password",component:et,type:"password",placeholder:"Password",validate:pe})]}),Object(X.jsxs)("div",{className:me.a.itemCheckbox,children:[Object(X.jsx)(je.a,{name:"RememberMe",component:et,type:"checkbox"})," ",Object(X.jsx)("span",{children:"Remember me"})]}),e.authError?Object(X.jsxs)("span",{className:me.a.formAuthError,children:[" ",e.authError," "]}):void 0,e.captchaUrl&&Object(X.jsx)("div",{children:Object(X.jsx)("img",{src:e.captchaUrl})}),e.captchaUrl&&Object(X.jsx)(je.a,{name:"captcha",component:et,placeholder:"Symbols from image",validate:pe}),Object(X.jsx)("div",{children:Object(X.jsx)("button",{className:me.a.button,type:"submit",children:"Sign in"})})]})}})},rt=Object(G.b)((function(e){return{isAuth:e.auth.isAuth,authError:e.auth.authError,captchaUrl:e.auth.captchaUrl}}),{autorizationUser:function(e,t,n,a){return function(){var r=Object(c.a)(i.a.mark((function r(s){var c,o;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,l.a.autorization(e,t,n,a);case 2:0===(c=r.sent).data.resultCode?s(I()):(10===c.data.resultCode&&s(k()),o=c.data.messages.length>0?c.data.messages[0]:"Some Error",s({type:C,authError:o}));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){return e.isAuth?Object(X.jsx)(K.a,{to:"/profile"}):Object(X.jsxs)("div",{className:nt.a.container,children:[Object(X.jsx)("div",{className:nt.a.title,children:"Authorization"}),Object(X.jsx)(at,{onSubmit:function(t){e.autorizationUser(t.Email,t.Password,t.RememberMe,t.captcha)},authError:e.authError,captchaUrl:e.captchaUrl})]})})),st=z.a.lazy((function(){return n.e(3).then(n.bind(null,103))})),it=function(e){Object(q.a)(n,e);var t=Object(J.a)(n);function n(){return Object(V.a)(this,n),t.apply(this,arguments)}return Object(W.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(X.jsx)(Y.a,{children:Object(X.jsxs)("div",{className:"app-wrapper",children:[Object(X.jsx)(te,{}),Object(X.jsx)("div",{className:"app-content-wrapper",children:Object(X.jsxs)("div",{className:"app-content-grid",children:[Object(X.jsx)(re,{}),Object(X.jsx)("div",{className:"app-content",children:Object(X.jsxs)("div",{className:"app-content-container",children:[Object(X.jsx)(K.b,{path:"/",render:function(){return Object(X.jsx)(K.a,{to:"/profile"})}}),Object(X.jsx)(K.b,{path:"/messages",render:function(){return Object(X.jsx)(Je,{})}}),Object(X.jsx)(K.b,{path:"/profile/:userId?",render:function(){return Object(X.jsx)(De,{})}}),Object(X.jsx)(K.b,{path:"/users",render:function(){return Object(X.jsx)(R.Suspense,{fallback:Object(X.jsx)("div",{children:"Loading..."}),children:Object(X.jsx)(st,{})})}}),Object(X.jsx)(K.b,{path:"/news",render:function(){return Object(X.jsx)(Ze,{})}}),Object(X.jsx)(K.b,{path:"/music",render:function(){return Object(X.jsx)($e,{})}}),Object(X.jsx)(K.b,{path:"/login",render:function(){return Object(X.jsx)(rt,{})}})]})})]})})]})}):Object(X.jsx)(Se.a,{})}}]),n}(z.a.Component),ct=Object(G.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){e(I()).then((function(){e({type:A})}))}}})(it);H.a.render(Object(X.jsx)(z.a.StrictMode,{children:Object(X.jsx)(G.a,{store:L,children:Object(X.jsx)(ct,{})})}),document.getElementById("root")),a()}},[[99,1,2]]]);
//# sourceMappingURL=main.958f20fd.chunk.js.map